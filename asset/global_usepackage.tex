\usepackage{amsmath,amsthm,amssymb,mathdots}
% \usepackage{fourier}
% \usepackage{courier}
%% \usepackage{fontspec}
%% \usepackage{euler}
%% \usepackage[utf8]{inputenc} % Required for inputting international characters
%% \usepackage[T1]{fontenc} % Output font encoding for international characters
%% \usepackage{mathpazo} % Use the Palatino font
\usepackage{graphicx} % Required for including images
\usepackage{booktabs} % Required for better horizontal rules in tables
\usepackage{enumerate} % To modify the enumerate environment

\usepackage{multicol}
\usepackage{multirow}
\usepackage{subfigure}
%\usepackage[most]{tcolorbox}
\newcounter{testexample}
\usepackage{xparse}
\usepackage{lipsum}
\usepackage[UTF8,noindent]{ctex}
\usepackage{extarrows}
\usepackage{animate}
\usepackage{dcolumn}
\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{arrows,snakes,backgrounds,shapes,patterns,fit}
\usetikzlibrary{matrix,fit,positioning,decorations.pathmorphing}
\usetikzlibrary{shapes.geometric}


\usepackage{listings}
\lstset{
        language=c,
        keywordstyle=\color{red},
        %% frame=single,
        basicstyle=\ttfamily,
        commentstyle=\color{blue},
        breakindent=0pt,
        rulesepcolor=\color{red!20!green!20!blue!20},
        rulecolor=\color{black},
        tabsize=4,
        numbersep=5pt,
        breaklines=true,
        % backgroundcolor=\color{red!15},
        showstringspaces=false,
        showspaces=false,
        showtabs=false,
        extendedchars=false,
        escapeinside=``,
}

\usepackage{refcount}
\usepackage{multicol}
\newcounter{countitems}
\newcounter{nextitemizecount}
\newcommand{\setupcountitems}{%
        \stepcounter{nextitemizecount}%
        \setcounter{countitems}{0}%
        \preto\item{\stepcounter{countitems}}%
}
\makeatletter
\newcommand{\computecountitems}{%
        \edef\@currentlabel{\number\c@countitems}%
        \label{countitems@\number\numexpr\value{nextitemizecount}-1\relax}%
}
\newcommand{\nextitemizecount}{%
        \getrefnumber{countitems@\number\c@nextitemizecount}%
}
\newcommand{\previtemizecount}{%
        \getrefnumber{countitems@\number\numexpr\value{nextitemizecount}-1\relax}%
}
\makeatother    
\newenvironment{AutoMultiColItemize}{%
        \ifnumcomp{\nextitemizecount}{>}{3}{\begin{multicols}{2}}{}%
                \setupcountitems\begin{itemize}}%
                {\end{itemize}%
                \unskip\computecountitems\ifnumcomp{\previtemizecount}{>}{3}{\end{multicols}}{}}

\tikzset{mystyle/.style n args={5}{
    rectangle,
    draw,
    fill=#1!50,
    % rounded corners,
    minimum height=#2cm,
    minimum width=#3cm,
    text width=#4cm,
    align=#5
  }}

\tikzset{mystyle2/.style n args={5}{
    rectangle,
    % draw,
    fill=#1!30,
    % rounded corners,
    minimum height=#2,
    minimum width=#3\textwidth,
    text width=#4\textwidth,
    align=#5,
    inner sep=0,
  }}

\tikzset{myarrow/.style n args={2}{
    ->,
    #1,
    line width=#2
  }}

